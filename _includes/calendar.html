<section class="pb-5 pt-5">
  <div class="container">
    <h1 class="text-white text-center mb-5">Upcoming Events</h1>
    <div class="row justify-content-center align-items-start">
      <div class="col-md-5 text-white mb-4 mt-lg-5">
        <div id="events-list"></div>
      </div>
      <div class="col-md-7 d-flex justify-content-center ">
        <iframe
          src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=America%2FChicago&showPrint=0&showTz=0&src=c2t1dGVja2FkamVpbHFuQGdtYWlsLmNvbQ&color=%23039be5&hl=en"
          class="rounded-4 mb-5 d-flex justify-content-center" style="border:solid 1px #777" width="100%" height="400"
          frameborder="0" scrolling="no"></iframe>
      </div>
    </div>

  </div>
  </div>
  <script>
    const calendarId = 'skuteckadjeilqn@gmail.com';
    const apiKey = 'AIzaSyC1btdZ6tUdyQ-iPg0NRfsquEUmQo_j5QA';

    const url = `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events?key=${apiKey}`;

    fetch(url)
      .then(response => response.json())
      .then(data => {
        let events = data.items;
        events.sort((a, b) => {
          const dateA = new Date(a.start.dateTime || a.start.date);
          const dateB = new Date(b.start.dateTime || b.start.date);
          return dateA - dateB;
        })

        const eventsList = document.getElementById('events-list');
        events.forEach(event => {
          const div = document.createElement('div');
          const start = event.start.dateTime || event.start.date;
          const formattedStart = new Date(start).toLocaleString('en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric',
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
          });
          div.textContent = `${formattedStart} - ${event.summary}`;
          eventsList.appendChild(div);
          div.classList.add('mb-3', 'bg-white', 'text-dark', 'p-3', 'rounded-3');
        });
      })
  </script>

</section>